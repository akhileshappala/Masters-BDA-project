{"ast":null,"code":"var _jsxFileName = \"/Users/ssakhilesha/Documents/GitHub/Masters-BDA-project/website /covid19india-react-master/src/components/Actions.js\",\n    _s = $RefreshSig$();\n\nimport ActionsPanel from './ActionsPanel';\nimport { API_DOMAIN, API_REFRESH_INTERVAL } from '../constants';\nimport { fetcher, formatDateObjIndia, parseIndiaDate, retry } from '../utils/commonFunctions';\nimport { max } from 'date-fns';\nimport equal from 'fast-deep-equal';\nimport { memo, useEffect, useMemo, useState, lazy, Suspense } from 'react';\nimport { useLocalStorage } from 'react-use';\nimport useSWR from 'swr';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Updates = /*#__PURE__*/lazy(_c = () => retry(() => import('./Updates')));\n_c2 = Updates;\n\nconst Actions = ({\n  date,\n  setDate,\n  dates,\n  lastUpdatedDate\n}) => {\n  _s();\n\n  const [showUpdates, setShowUpdates] = useState(false);\n  const [newUpdate, setNewUpdate] = useLocalStorage('newUpdate', false);\n  const [lastViewedLog, setLastViewedLog] = useLocalStorage('lastViewedLog', 0);\n  const [isTimelineMode, setIsTimelineMode] = useState(false);\n  const {\n    data: updates\n  } = useSWR(`${API_DOMAIN}/updatelog/log.json`, fetcher, {\n    refreshInterval: API_REFRESH_INTERVAL\n  });\n  useEffect(() => {\n    if (updates !== undefined) {\n      const lastTimestamp = updates.slice().reverse()[0].timestamp * 1000;\n\n      if (lastTimestamp !== lastViewedLog) {\n        setNewUpdate(true);\n        setLastViewedLog(lastTimestamp);\n      }\n    }\n  }, [lastViewedLog, updates, setLastViewedLog, setNewUpdate]);\n  const maxLastUpdatedDate = useMemo(() => {\n    return formatDateObjIndia(max([lastViewedLog, lastUpdatedDate].filter(date => date).map(date => parseIndiaDate(date))));\n  }, [lastViewedLog, lastUpdatedDate]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ActionsPanel, {\n      lastUpdatedDate: maxLastUpdatedDate,\n      newUpdate,\n      isTimelineMode,\n      setIsTimelineMode,\n      showUpdates,\n      date,\n      setDate,\n      dates,\n      setNewUpdate,\n      setShowUpdates\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), showUpdates && /*#__PURE__*/_jsxDEV(Suspense, {\n      fallback: /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 29\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Updates, {\n        updates\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Actions, \"pb0fEhAO8E9s4LWMAovIJmRiy+s=\", false, function () {\n  return [useLocalStorage, useLocalStorage, useSWR];\n});\n\n_c3 = Actions;\n\nconst isEqual = (prevProps, currProps) => {\n  if (!equal(currProps.date, prevProps.date)) {\n    return false;\n  } else if (!equal(currProps.lastUpdatedDate, prevProps.lastUpdatedDate)) {\n    return false;\n  } else if (!equal(currProps.dates, prevProps.dates)) {\n    return false;\n  }\n\n  return true;\n};\n\nexport default _c4 = /*#__PURE__*/memo(Actions, isEqual);\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Updates$lazy\");\n$RefreshReg$(_c2, \"Updates\");\n$RefreshReg$(_c3, \"Actions\");\n$RefreshReg$(_c4, \"%default%\");","map":{"version":3,"sources":["/Users/ssakhilesha/Documents/GitHub/Masters-BDA-project/website /covid19india-react-master/src/components/Actions.js"],"names":["ActionsPanel","API_DOMAIN","API_REFRESH_INTERVAL","fetcher","formatDateObjIndia","parseIndiaDate","retry","max","equal","memo","useEffect","useMemo","useState","lazy","Suspense","useLocalStorage","useSWR","Updates","Actions","date","setDate","dates","lastUpdatedDate","showUpdates","setShowUpdates","newUpdate","setNewUpdate","lastViewedLog","setLastViewedLog","isTimelineMode","setIsTimelineMode","data","updates","refreshInterval","undefined","lastTimestamp","slice","reverse","timestamp","maxLastUpdatedDate","filter","map","isEqual","prevProps","currProps"],"mappings":";;;AAAA,OAAOA,YAAP,MAAyB,gBAAzB;AAEA,SAAQC,UAAR,EAAoBC,oBAApB,QAA+C,cAA/C;AACA,SACEC,OADF,EAEEC,kBAFF,EAGEC,cAHF,EAIEC,KAJF,QAKO,0BALP;AAOA,SAAQC,GAAR,QAAkB,UAAlB;AACA,OAAOC,KAAP,MAAkB,iBAAlB;AACA,SAAQC,IAAR,EAAcC,SAAd,EAAyBC,OAAzB,EAAkCC,QAAlC,EAA4CC,IAA5C,EAAkDC,QAAlD,QAAiE,OAAjE;AACA,SAAQC,eAAR,QAA8B,WAA9B;AACA,OAAOC,MAAP,MAAmB,KAAnB;;;AAEA,MAAMC,OAAO,gBAAGJ,IAAI,MAAC,MAAMP,KAAK,CAAC,MAAM,OAAO,WAAP,CAAP,CAAZ,CAApB;MAAMW,O;;AAEN,MAAMC,OAAO,GAAG,CAAC;AAACC,EAAAA,IAAD;AAAOC,EAAAA,OAAP;AAAgBC,EAAAA,KAAhB;AAAuBC,EAAAA;AAAvB,CAAD,KAA6C;AAAA;;AAC3D,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCZ,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM,CAACa,SAAD,EAAYC,YAAZ,IAA4BX,eAAe,CAAC,WAAD,EAAc,KAAd,CAAjD;AACA,QAAM,CAACY,aAAD,EAAgBC,gBAAhB,IAAoCb,eAAe,CAAC,eAAD,EAAkB,CAAlB,CAAzD;AACA,QAAM,CAACc,cAAD,EAAiBC,iBAAjB,IAAsClB,QAAQ,CAAC,KAAD,CAApD;AAEA,QAAM;AAACmB,IAAAA,IAAI,EAAEC;AAAP,MAAkBhB,MAAM,CAAE,GAAEf,UAAW,qBAAf,EAAqCE,OAArC,EAA8C;AAC1E8B,IAAAA,eAAe,EAAE/B;AADyD,GAA9C,CAA9B;AAIAQ,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIsB,OAAO,KAAKE,SAAhB,EAA2B;AACzB,YAAMC,aAAa,GAAGH,OAAO,CAACI,KAAR,GAAgBC,OAAhB,GAA0B,CAA1B,EAA6BC,SAA7B,GAAyC,IAA/D;;AACA,UAAIH,aAAa,KAAKR,aAAtB,EAAqC;AACnCD,QAAAA,YAAY,CAAC,IAAD,CAAZ;AACAE,QAAAA,gBAAgB,CAACO,aAAD,CAAhB;AACD;AACF;AACF,GARQ,EAQN,CAACR,aAAD,EAAgBK,OAAhB,EAAyBJ,gBAAzB,EAA2CF,YAA3C,CARM,CAAT;AAUA,QAAMa,kBAAkB,GAAG5B,OAAO,CAAC,MAAM;AACvC,WAAOP,kBAAkB,CACvBG,GAAG,CACD,CAACoB,aAAD,EAAgBL,eAAhB,EACGkB,MADH,CACWrB,IAAD,IAAUA,IADpB,EAEGsB,GAFH,CAEQtB,IAAD,IAAUd,cAAc,CAACc,IAAD,CAF/B,CADC,CADoB,CAAzB;AAOD,GARiC,EAQ/B,CAACQ,aAAD,EAAgBL,eAAhB,CAR+B,CAAlC;AAUA,sBACE;AAAA,4BACE,QAAC,YAAD;AAEIA,MAAAA,eAAe,EAAEiB,kBAFrB;AAGId,MAAAA,SAHJ;AAIII,MAAAA,cAJJ;AAKIC,MAAAA,iBALJ;AAMIP,MAAAA,WANJ;AAOIJ,MAAAA,IAPJ;AAQIC,MAAAA,OARJ;AASIC,MAAAA,KATJ;AAUIK,MAAAA,YAVJ;AAWIF,MAAAA;AAXJ;AAAA;AAAA;AAAA;AAAA,YADF,EAgBGD,WAAW,iBACV,QAAC,QAAD;AAAU,MAAA,QAAQ,eAAE;AAAA;AAAA;AAAA;AAAA,cAApB;AAAA,6BACE,QAAC,OAAD;AAAcS,QAAAA;AAAd;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAjBJ;AAAA,kBADF;AAwBD,CAtDD;;GAAMd,O;UAE8BH,e,EACQA,e,EAGlBC,M;;;MANpBE,O;;AAwDN,MAAMwB,OAAO,GAAG,CAACC,SAAD,EAAYC,SAAZ,KAA0B;AACxC,MAAI,CAACpC,KAAK,CAACoC,SAAS,CAACzB,IAAX,EAAiBwB,SAAS,CAACxB,IAA3B,CAAV,EAA4C;AAC1C,WAAO,KAAP;AACD,GAFD,MAEO,IAAI,CAACX,KAAK,CAACoC,SAAS,CAACtB,eAAX,EAA4BqB,SAAS,CAACrB,eAAtC,CAAV,EAAkE;AACvE,WAAO,KAAP;AACD,GAFM,MAEA,IAAI,CAACd,KAAK,CAACoC,SAAS,CAACvB,KAAX,EAAkBsB,SAAS,CAACtB,KAA5B,CAAV,EAA8C;AACnD,WAAO,KAAP;AACD;;AACD,SAAO,IAAP;AACD,CATD;;AAWA,kCAAeZ,IAAI,CAACS,OAAD,EAAUwB,OAAV,CAAnB","sourcesContent":["import ActionsPanel from './ActionsPanel';\n\nimport {API_DOMAIN, API_REFRESH_INTERVAL} from '../constants';\nimport {\n  fetcher,\n  formatDateObjIndia,\n  parseIndiaDate,\n  retry,\n} from '../utils/commonFunctions';\n\nimport {max} from 'date-fns';\nimport equal from 'fast-deep-equal';\nimport {memo, useEffect, useMemo, useState, lazy, Suspense} from 'react';\nimport {useLocalStorage} from 'react-use';\nimport useSWR from 'swr';\n\nconst Updates = lazy(() => retry(() => import('./Updates')));\n\nconst Actions = ({date, setDate, dates, lastUpdatedDate}) => {\n  const [showUpdates, setShowUpdates] = useState(false);\n  const [newUpdate, setNewUpdate] = useLocalStorage('newUpdate', false);\n  const [lastViewedLog, setLastViewedLog] = useLocalStorage('lastViewedLog', 0);\n  const [isTimelineMode, setIsTimelineMode] = useState(false);\n\n  const {data: updates} = useSWR(`${API_DOMAIN}/updatelog/log.json`, fetcher, {\n    refreshInterval: API_REFRESH_INTERVAL,\n  });\n\n  useEffect(() => {\n    if (updates !== undefined) {\n      const lastTimestamp = updates.slice().reverse()[0].timestamp * 1000;\n      if (lastTimestamp !== lastViewedLog) {\n        setNewUpdate(true);\n        setLastViewedLog(lastTimestamp);\n      }\n    }\n  }, [lastViewedLog, updates, setLastViewedLog, setNewUpdate]);\n\n  const maxLastUpdatedDate = useMemo(() => {\n    return formatDateObjIndia(\n      max(\n        [lastViewedLog, lastUpdatedDate]\n          .filter((date) => date)\n          .map((date) => parseIndiaDate(date))\n      )\n    );\n  }, [lastViewedLog, lastUpdatedDate]);\n\n  return (\n    <>\n      <ActionsPanel\n        {...{\n          lastUpdatedDate: maxLastUpdatedDate,\n          newUpdate,\n          isTimelineMode,\n          setIsTimelineMode,\n          showUpdates,\n          date,\n          setDate,\n          dates,\n          setNewUpdate,\n          setShowUpdates,\n        }}\n      />\n\n      {showUpdates && (\n        <Suspense fallback={<div />}>\n          <Updates {...{updates}} />\n        </Suspense>\n      )}\n    </>\n  );\n};\n\nconst isEqual = (prevProps, currProps) => {\n  if (!equal(currProps.date, prevProps.date)) {\n    return false;\n  } else if (!equal(currProps.lastUpdatedDate, prevProps.lastUpdatedDate)) {\n    return false;\n  } else if (!equal(currProps.dates, prevProps.dates)) {\n    return false;\n  }\n  return true;\n};\n\nexport default memo(Actions, isEqual);\n"]},"metadata":{},"sourceType":"module"}