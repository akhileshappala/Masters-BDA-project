{"code":"(this.webpackJsonpcovid19india=this.webpackJsonpcovid19india||[]).push([[22],{260:function(t,e,n){\"use strict\";n.r(e);var r=n(73),a=n(9),c=n(21),i=n(77),o=n.n(i),u=n(263),s=n(187),l=n(271),f=n(272),d=n(262),j=n(275),b=n(264),O=(n(206),n(53)),h=n(65),p=n(76),v=n.n(p),m=n(2),y=n(290),g=n(19),k=10,x=10,w=2,M=10;function A(t){var e=t.timeseries,n=t.date,i=Object(m.useRef)([]),p=n||Object(c.g)(),v=Object(y.a)(),A=Object(r.a)(v,2),C=A[0],R=A[1].width;R=Math.min(R,120);var E=Object(m.useMemo)((function(){var t=Object.keys(e||{}).filter((function(t){return t<=p})),n=t[t.length-1],r=Object(O.a)(Object(h.a)(Object(c.j)(n),a.k),{representation:\"date\"});return t.filter((function(t){return t>=r}))}),[p,e]),J=Object(m.useCallback)((function(t,n){return Object(c.h)(null===e||void 0===e?void 0:e[t],\"delta\",n)}),[e]);return Object(m.useEffect)((function(){if(R){var t=E.length,e=R-x,n=75-w,r=Object(l.a)().clamp(!0).domain([Object(c.j)(E[0]||p),Object(c.j)(E[t-1])||p]).range([M,e]);i.current.forEach((function(e,i){var o,l=Object(d.a)(e),O=a.i[i],h=a.q[O].color,p=Object(u.a)(E,(function(t){return Math.abs(J(t,O))})),v=Object(f.a)().clamp(!0).domain([-p,p]).range([n,k]),m=Object(j.a)().curve(b.a).x((function(t){return r(Object(c.j)(t))})).y((function(t){return v(J(t,O))}));l.selectAll(\"path\").data(t?[E]:[]).join((function(t){return t.append(\"path\").attr(\"fill\",\"none\").attr(\"stroke\",h+\"99\").attr(\"stroke-width\",2.5).attr(\"d\",m).attr(\"stroke-dasharray\",(function(){return o=this.getTotalLength()})).call((function(t){return t.attr(\"stroke-dashoffset\",o).transition().delay(100).duration(2500).attr(\"stroke-dashoffset\",0)}))}),(function(t){return t.attr(\"stroke-dasharray\",null).transition().duration(500).attrTween(\"d\",(function(t){var e=Object(d.a)(this).attr(\"d\"),n=m(t);return Object(s.a)(e,n)})).selection()})),l.selectAll(\"circle\").data(t?[E[t-1]]:[]).join((function(t){return t.append(\"circle\").attr(\"fill\",h).attr(\"r\",2.5).attr(\"cx\",(function(t){return r(Object(c.j)(t))})).attr(\"cy\",(function(t){return v(J(t,O))})).style(\"opacity\",0).call((function(t){return t.transition().delay(2100).duration(500).style(\"opacity\",1).attr(\"cx\",(function(t){return r(Object(c.j)(t))})).attr(\"cy\",(function(t){return v(J(t,O))}))}))}),(function(t){return t.transition().duration(500).attr(\"cx\",(function(t){return r(Object(c.j)(t))})).attr(\"cy\",(function(t){return v(J(t,O))})).style(\"opacity\",1).selection()}))}))}}),[p,E,R,J]),Object(g.jsx)(\"div\",{className:\"Minigraph\",children:a.i.map((function(t,e){return Object(g.jsx)(\"div\",{className:o()(\"svg-parent\"),ref:0===e?C:null,style:{width:\"calc(\".concat(100/a.i.length,\"%)\")},children:Object(g.jsx)(\"svg\",{ref:function(t){i.current[e]=t},preserveAspectRatio:\"xMidYMid meet\",width:R,height:75})},t)}))})}var C=function(t,e){return!e.forceRender&&(!(e.timeseries||!t.timeseries)||!(e.timeseries&&!t.timeseries)&&(!!v()(e.stateCode,t.stateCode)&&!!v()(e.date,t.date)))};e.default=Object(m.memo)(A,C)}}]);","name":"static/js/22.eea0aca6.chunk.js","map":{"version":3,"sources":["static/js/22.eea0aca6.chunk.js"],"names":["this","push","260","module","__webpack_exports__","__webpack_require__","r","_Users_ssakhilesha_Documents_GitHub_Masters_BDA_project_website_covid19_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","_constants__WEBPACK_IMPORTED_MODULE_1__","_utils_commonFunctions__WEBPACK_IMPORTED_MODULE_2__","classnames__WEBPACK_IMPORTED_MODULE_3__","classnames__WEBPACK_IMPORTED_MODULE_3___default","n","d3_array__WEBPACK_IMPORTED_MODULE_4__","d3_interpolate_path__WEBPACK_IMPORTED_MODULE_5__","d3_scale__WEBPACK_IMPORTED_MODULE_6__","d3_scale__WEBPACK_IMPORTED_MODULE_7__","d3_selection__WEBPACK_IMPORTED_MODULE_8__","d3_shape__WEBPACK_IMPORTED_MODULE_9__","d3_shape__WEBPACK_IMPORTED_MODULE_10__","date_fns__WEBPACK_IMPORTED_MODULE_12__","date_fns__WEBPACK_IMPORTED_MODULE_13__","fast_deep_equal__WEBPACK_IMPORTED_MODULE_14__","fast_deep_equal__WEBPACK_IMPORTED_MODULE_14___default","react__WEBPACK_IMPORTED_MODULE_15__","react_use__WEBPACK_IMPORTED_MODULE_16__","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__","margin","Minigraphs","_ref","timeseries","timelineDate","date","refs","Object","endDate","_useMeasure","_useMeasure2","wrapperRef","width","Math","min","dates","pastDates","keys","filter","lastDate","length","cutOffDateLower","representation","getMinigraphStatistic","statistic","T","chartRight","chartBottom","xScale","clamp","domain","range","current","forEach","ref","index","pathLength","svg","color","dailyMaxAbs","abs","yScale","linePath","curve","x","y","selectAll","data","join","enter","append","attr","getTotalLength","call","transition","delay","duration","update","attrTween","previous","selection","style","className","children","map","concat","el","preserveAspectRatio","height","isEqual","prevProps","currProps","forceRender","stateCode"],"mappings":"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"},"input":"(this[\"webpackJsonpcovid19india\"] = this[\"webpackJsonpcovid19india\"] || []).push([[22],{\n\n/***/ 260:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Users_ssakhilesha_Documents_GitHub_Masters_BDA_project_website_covid19_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(73);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9);\n/* harmony import */ var _utils_commonFunctions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(77);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var d3_array__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(263);\n/* harmony import */ var d3_interpolate_path__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(187);\n/* harmony import */ var d3_scale__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(271);\n/* harmony import */ var d3_scale__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(272);\n/* harmony import */ var d3_selection__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(262);\n/* harmony import */ var d3_shape__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(275);\n/* harmony import */ var d3_shape__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(264);\n/* harmony import */ var d3_transition__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(206);\n/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(53);\n/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(65);\n/* harmony import */ var fast_deep_equal__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(76);\n/* harmony import */ var fast_deep_equal__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(fast_deep_equal__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(290);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(19);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__);\n// Dimensions\nvar margin={top:10,right:10,bottom:2,left:10};var height=75;var maxWidth=120;function Minigraphs(_ref){var timeseries=_ref.timeseries,timelineDate=_ref.date;var refs=Object(react__WEBPACK_IMPORTED_MODULE_15__[\"useRef\"])([]);var endDate=timelineDate||Object(_utils_commonFunctions__WEBPACK_IMPORTED_MODULE_2__[/* getIndiaDateYesterdayISO */ \"g\"])();var _useMeasure=Object(react_use__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"])(),_useMeasure2=Object(_Users_ssakhilesha_Documents_GitHub_Masters_BDA_project_website_covid19_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(_useMeasure,2),wrapperRef=_useMeasure2[0],width=_useMeasure2[1].width;width=Math.min(width,maxWidth);var dates=Object(react__WEBPACK_IMPORTED_MODULE_15__[\"useMemo\"])(function(){var pastDates=Object.keys(timeseries||{}).filter(function(date){return date<=endDate;});var lastDate=pastDates[pastDates.length-1];var cutOffDateLower=Object(date_fns__WEBPACK_IMPORTED_MODULE_12__[/* default */ \"a\"])(Object(date_fns__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"])(Object(_utils_commonFunctions__WEBPACK_IMPORTED_MODULE_2__[/* parseIndiaDate */ \"j\"])(lastDate),_constants__WEBPACK_IMPORTED_MODULE_1__[/* MINIGRAPH_LOOKBACK_DAYS */ \"k\"]),{representation:'date'});return pastDates.filter(function(date){return date>=cutOffDateLower;});},[endDate,timeseries]);var getMinigraphStatistic=Object(react__WEBPACK_IMPORTED_MODULE_15__[\"useCallback\"])(function(date,statistic){return Object(_utils_commonFunctions__WEBPACK_IMPORTED_MODULE_2__[/* getStatistic */ \"h\"])(timeseries===null||timeseries===void 0?void 0:timeseries[date],'delta',statistic);},[timeseries]);Object(react__WEBPACK_IMPORTED_MODULE_15__[\"useEffect\"])(function(){if(!width)return;var T=dates.length;var chartRight=width-margin.right;var chartBottom=height-margin.bottom;var xScale=Object(d3_scale__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().clamp(true).domain([Object(_utils_commonFunctions__WEBPACK_IMPORTED_MODULE_2__[/* parseIndiaDate */ \"j\"])(dates[0]||endDate),Object(_utils_commonFunctions__WEBPACK_IMPORTED_MODULE_2__[/* parseIndiaDate */ \"j\"])(dates[T-1])||endDate]).range([margin.left,chartRight]);refs.current.forEach(function(ref,index){var svg=Object(d3_selection__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"])(ref);var statistic=_constants__WEBPACK_IMPORTED_MODULE_1__[/* LEVEL_STATISTICS */ \"i\"][index];var color=_constants__WEBPACK_IMPORTED_MODULE_1__[/* STATISTIC_CONFIGS */ \"q\"][statistic].color;var dailyMaxAbs=Object(d3_array__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(dates,function(date){return Math.abs(getMinigraphStatistic(date,statistic));});var yScale=Object(d3_scale__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])().clamp(true).domain([-dailyMaxAbs,dailyMaxAbs]).range([chartBottom,margin.top]);var linePath=Object(d3_shape__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"])().curve(d3_shape__WEBPACK_IMPORTED_MODULE_10__[/* monotoneX */ \"a\"]).x(function(date){return xScale(Object(_utils_commonFunctions__WEBPACK_IMPORTED_MODULE_2__[/* parseIndiaDate */ \"j\"])(date));}).y(function(date){return yScale(getMinigraphStatistic(date,statistic));});var pathLength;svg.selectAll('path').data(T?[dates]:[]).join(function(enter){return enter.append('path').attr('fill','none').attr('stroke',color+'99').attr('stroke-width',2.5).attr('d',linePath).attr('stroke-dasharray',function(){return pathLength=this.getTotalLength();}).call(function(enter){return enter.attr('stroke-dashoffset',pathLength).transition().delay(100).duration(2500).attr('stroke-dashoffset',0);});},function(update){return update.attr('stroke-dasharray',null).transition().duration(500).attrTween('d',function(date){var previous=Object(d3_selection__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"])(this).attr('d');var current=linePath(date);return Object(d3_interpolate_path__WEBPACK_IMPORTED_MODULE_5__[/* interpolatePath */ \"a\"])(previous,current);}).selection();});svg.selectAll('circle').data(T?[dates[T-1]]:[]).join(function(enter){return enter.append('circle').attr('fill',color).attr('r',2.5).attr('cx',function(date){return xScale(Object(_utils_commonFunctions__WEBPACK_IMPORTED_MODULE_2__[/* parseIndiaDate */ \"j\"])(date));}).attr('cy',function(date){return yScale(getMinigraphStatistic(date,statistic));}).style('opacity',0).call(function(enter){return enter.transition().delay(2100).duration(500).style('opacity',1).attr('cx',function(date){return xScale(Object(_utils_commonFunctions__WEBPACK_IMPORTED_MODULE_2__[/* parseIndiaDate */ \"j\"])(date));}).attr('cy',function(date){return yScale(getMinigraphStatistic(date,statistic));});});},function(update){return update.transition().duration(500).attr('cx',function(date){return xScale(Object(_utils_commonFunctions__WEBPACK_IMPORTED_MODULE_2__[/* parseIndiaDate */ \"j\"])(date));}).attr('cy',function(date){return yScale(getMinigraphStatistic(date,statistic));}).style('opacity',1).selection();});});},[endDate,dates,width,getMinigraphStatistic]);return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"div\",{className:\"Minigraph\",children:_constants__WEBPACK_IMPORTED_MODULE_1__[/* LEVEL_STATISTICS */ \"i\"].map(function(statistic,index){return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"div\",{className:classnames__WEBPACK_IMPORTED_MODULE_3___default()('svg-parent'),ref:index===0?wrapperRef:null,style:{width:\"calc(\".concat(100/_constants__WEBPACK_IMPORTED_MODULE_1__[/* LEVEL_STATISTICS */ \"i\"].length,\"%)\")},children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"svg\",{ref:function ref(el){refs.current[index]=el;},preserveAspectRatio:\"xMidYMid meet\",width:width,height:height})},statistic);})});}var isEqual=function isEqual(prevProps,currProps){if(currProps.forceRender){return false;}else if(!currProps.timeseries&&prevProps.timeseries){return true;}else if(currProps.timeseries&&!prevProps.timeseries){return false;}else if(!fast_deep_equal__WEBPACK_IMPORTED_MODULE_14___default()(currProps.stateCode,prevProps.stateCode)){return false;}else if(!fast_deep_equal__WEBPACK_IMPORTED_MODULE_14___default()(currProps.date,prevProps.date)){return false;}return true;};/* harmony default export */ __webpack_exports__[\"default\"] = (/*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_15__[\"memo\"])(Minigraphs,isEqual));\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/Users/ssakhilesha/Documents/GitHub/Masters-BDA-project/website/covid19/src/components/Minigraphs.js"],"names":["margin","top","right","bottom","left","height","maxWidth","Minigraphs","timeseries","timelineDate","date","refs","useRef","endDate","getIndiaDateYesterdayISO","useMeasure","wrapperRef","width","Math","min","dates","useMemo","pastDates","Object","keys","filter","lastDate","length","cutOffDateLower","formatISO","subDays","parseIndiaDate","MINIGRAPH_LOOKBACK_DAYS","representation","getMinigraphStatistic","useCallback","statistic","getStatistic","useEffect","T","chartRight","chartBottom","xScale","scaleTime","clamp","domain","range","current","forEach","ref","index","svg","select","LEVEL_STATISTICS","color","STATISTIC_CONFIGS","dailyMaxAbs","max","abs","yScale","scaleLinear","linePath","line","curve","curveMonotoneX","x","y","pathLength","selectAll","data","join","enter","append","attr","getTotalLength","call","transition","delay","duration","update","attrTween","previous","interpolatePath","selection","style","map","classnames","el","isEqual","prevProps","currProps","forceRender","equal","stateCode","memo"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA,GAAMA,OAAM,CAAG,CAACC,GAAG,CAAE,EAAN,CAAUC,KAAK,CAAE,EAAjB,CAAqBC,MAAM,CAAE,CAA7B,CAAgCC,IAAI,CAAE,EAAtC,CAAf,CACA,GAAMC,OAAM,CAAG,EAAf,CACA,GAAMC,SAAQ,CAAG,GAAjB,CAEA,QAASC,WAAT,MAAsD,IAAjCC,WAAiC,MAAjCA,UAAiC,CAAfC,YAAe,MAArBC,IAAqB,CACpD,GAAMC,KAAI,CAAGC,qDAAM,CAAC,EAAD,CAAnB,CACA,GAAMC,QAAO,CAAGJ,YAAY,EAAIK,+FAAwB,EAAxD,CAEA,gBAA4BC,kEAAU,EAAtC,sPAAKC,UAAL,iBAAkBC,KAAlB,iBAAkBA,KAAlB,CACAA,KAAK,CAAGC,IAAI,CAACC,GAAL,CAASF,KAAT,CAAgBX,QAAhB,CAAR,CAEA,GAAMc,MAAK,CAAGC,sDAAO,CAAC,UAAM,CAC1B,GAAMC,UAAS,CAAGC,MAAM,CAACC,IAAP,CAAYhB,UAAU,EAAI,EAA1B,EAA8BiB,MAA9B,CAChB,SAACf,IAAD,QAAUA,KAAI,EAAIG,OAAlB,EADgB,CAAlB,CAGA,GAAMa,SAAQ,CAAGJ,SAAS,CAACA,SAAS,CAACK,MAAV,CAAmB,CAApB,CAA1B,CAEA,GAAMC,gBAAe,CAAGC,iEAAS,CAC/BC,iEAAO,CAACC,qFAAc,CAACL,QAAD,CAAf,CAA2BM,0EAA3B,CADwB,CAE/B,CAACC,cAAc,CAAE,MAAjB,CAF+B,CAAjC,CAIA,MAAOX,UAAS,CAACG,MAAV,CAAiB,SAACf,IAAD,QAAUA,KAAI,EAAIkB,eAAlB,EAAjB,CAAP,CACD,CAXoB,CAWlB,CAACf,OAAD,CAAUL,UAAV,CAXkB,CAArB,CAaA,GAAM0B,sBAAqB,CAAGC,0DAAW,CACvC,SAACzB,IAAD,CAAO0B,SAAP,CAAqB,CACnB,MAAOC,oFAAY,CAAC7B,UAAD,SAACA,UAAD,iBAACA,UAAU,CAAGE,IAAH,CAAX,CAAqB,OAArB,CAA8B0B,SAA9B,CAAnB,CACD,CAHsC,CAIvC,CAAC5B,UAAD,CAJuC,CAAzC,CAOA8B,wDAAS,CAAC,UAAM,CACd,GAAI,CAACrB,KAAL,CAAY,OAEZ,GAAMsB,EAAC,CAAGnB,KAAK,CAACO,MAAhB,CAEA,GAAMa,WAAU,CAAGvB,KAAK,CAAGjB,MAAM,CAACE,KAAlC,CACA,GAAMuC,YAAW,CAAGpC,MAAM,CAAGL,MAAM,CAACG,MAApC,CAEA,GAAMuC,OAAM,CAAGC,gEAAS,GACrBC,KADY,CACN,IADM,EAEZC,MAFY,CAEL,CACNd,qFAAc,CAACX,KAAK,CAAC,CAAD,CAAL,EAAYP,OAAb,CADR,CAENkB,qFAAc,CAACX,KAAK,CAACmB,CAAC,CAAG,CAAL,CAAN,CAAd,EAAgC1B,OAF1B,CAFK,EAMZiC,KANY,CAMN,CAAC9C,MAAM,CAACI,IAAR,CAAcoC,UAAd,CANM,CAAf,CAQA7B,IAAI,CAACoC,OAAL,CAAaC,OAAb,CAAqB,SAACC,GAAD,CAAMC,KAAN,CAAgB,CACnC,GAAMC,IAAG,CAAGC,oEAAM,CAACH,GAAD,CAAlB,CACA,GAAMb,UAAS,CAAGiB,mEAAgB,CAACH,KAAD,CAAlC,CACA,GAAMI,MAAK,CAAGC,oEAAiB,CAACnB,SAAD,CAAjB,CAA6BkB,KAA3C,CAEA,GAAME,YAAW,CAAGC,gEAAG,CAACrC,KAAD,CAAQ,SAACV,IAAD,QAC7BQ,KAAI,CAACwC,GAAL,CAASxB,qBAAqB,CAACxB,IAAD,CAAO0B,SAAP,CAA9B,CAD6B,EAAR,CAAvB,CAIA,GAAMuB,OAAM,CAAGC,gEAAW,GACvBhB,KADY,CACN,IADM,EAEZC,MAFY,CAEL,CAAC,CAACW,WAAF,CAAeA,WAAf,CAFK,EAGZV,KAHY,CAGN,CAACL,WAAD,CAAczC,MAAM,CAACC,GAArB,CAHM,CAAf,CAKA,GAAM4D,SAAQ,CAAGC,gEAAI,GAClBC,KADc,CACRC,2DADQ,EAEdC,CAFc,CAEZ,SAACvD,IAAD,QAAUgC,OAAM,CAACX,qFAAc,CAACrB,IAAD,CAAf,CAAhB,EAFY,EAGdwD,CAHc,CAGZ,SAACxD,IAAD,QAAUiD,OAAM,CAACzB,qBAAqB,CAACxB,IAAD,CAAO0B,SAAP,CAAtB,CAAhB,EAHY,CAAjB,CAKA,GAAI+B,WAAJ,CACAhB,GAAG,CACAiB,SADH,CACa,MADb,EAEGC,IAFH,CAEQ9B,CAAC,CAAG,CAACnB,KAAD,CAAH,CAAa,EAFtB,EAGGkD,IAHH,CAII,SAACC,KAAD,QACEA,MAAK,CACFC,MADH,CACU,MADV,EAEGC,IAFH,CAEQ,MAFR,CAEgB,MAFhB,EAGGA,IAHH,CAGQ,QAHR,CAGkBnB,KAAK,CAAG,IAH1B,EAIGmB,IAJH,CAIQ,cAJR,CAIwB,GAJxB,EAKGA,IALH,CAKQ,GALR,CAKaZ,QALb,EAMGY,IANH,CAMQ,kBANR,CAM4B,UAAY,CACpC,MAAQN,WAAU,CAAG,KAAKO,cAAL,EAArB,CACD,CARH,EASGC,IATH,CASQ,SAACJ,KAAD,QACJA,MAAK,CACFE,IADH,CACQ,mBADR,CAC6BN,UAD7B,EAEGS,UAFH,GAGGC,KAHH,CAGS,GAHT,EAIGC,QAJH,CAIY,IAJZ,EAKGL,IALH,CAKQ,mBALR,CAK6B,CAL7B,CADI,EATR,CADF,EAJJ,CAsBI,SAACM,MAAD,QACEA,OAAM,CACHN,IADH,CACQ,kBADR,CAC4B,IAD5B,EAEGG,UAFH,GAGGE,QAHH,CAGY,GAHZ,EAIGE,SAJH,CAIa,GAJb,CAIkB,SAAUtE,IAAV,CAAgB,CAC9B,GAAMuE,SAAQ,CAAG7B,oEAAM,CAAC,IAAD,CAAN,CAAaqB,IAAb,CAAkB,GAAlB,CAAjB,CACA,GAAM1B,QAAO,CAAGc,QAAQ,CAACnD,IAAD,CAAxB,CACA,MAAOwE,oFAAe,CAACD,QAAD,CAAWlC,OAAX,CAAtB,CACD,CARH,EASGoC,SATH,EADF,EAtBJ,EAmCAhC,GAAG,CACAiB,SADH,CACa,QADb,EAEGC,IAFH,CAEQ9B,CAAC,CAAG,CAACnB,KAAK,CAACmB,CAAC,CAAG,CAAL,CAAN,CAAH,CAAoB,EAF7B,EAGG+B,IAHH,CAII,SAACC,KAAD,QACEA,MAAK,CACFC,MADH,CACU,QADV,EAEGC,IAFH,CAEQ,MAFR,CAEgBnB,KAFhB,EAGGmB,IAHH,CAGQ,GAHR,CAGa,GAHb,EAIGA,IAJH,CAIQ,IAJR,CAIc,SAAC/D,IAAD,QAAUgC,OAAM,CAACX,qFAAc,CAACrB,IAAD,CAAf,CAAhB,EAJd,EAKG+D,IALH,CAKQ,IALR,CAKc,SAAC/D,IAAD,QACViD,OAAM,CAACzB,qBAAqB,CAACxB,IAAD,CAAO0B,SAAP,CAAtB,CADI,EALd,EAQGgD,KARH,CAQS,SART,CAQoB,CARpB,EASGT,IATH,CASQ,SAACJ,KAAD,QACJA,MAAK,CACFK,UADH,GAEGC,KAFH,CAES,IAFT,EAGGC,QAHH,CAGY,GAHZ,EAIGM,KAJH,CAIS,SAJT,CAIoB,CAJpB,EAKGX,IALH,CAKQ,IALR,CAKc,SAAC/D,IAAD,QAAUgC,OAAM,CAACX,qFAAc,CAACrB,IAAD,CAAf,CAAhB,EALd,EAMG+D,IANH,CAMQ,IANR,CAMc,SAAC/D,IAAD,QACViD,OAAM,CAACzB,qBAAqB,CAACxB,IAAD,CAAO0B,SAAP,CAAtB,CADI,EANd,CADI,EATR,CADF,EAJJ,CAyBI,SAAC2C,MAAD,QACEA,OAAM,CACHH,UADH,GAEGE,QAFH,CAEY,GAFZ,EAGGL,IAHH,CAGQ,IAHR,CAGc,SAAC/D,IAAD,QAAUgC,OAAM,CAACX,qFAAc,CAACrB,IAAD,CAAf,CAAhB,EAHd,EAIG+D,IAJH,CAIQ,IAJR,CAIc,SAAC/D,IAAD,QACViD,OAAM,CAACzB,qBAAqB,CAACxB,IAAD,CAAO0B,SAAP,CAAtB,CADI,EAJd,EAOGgD,KAPH,CAOS,SAPT,CAOoB,CAPpB,EAQGD,SARH,EADF,EAzBJ,EAoCD,CA3FD,EA4FD,CA5GQ,CA4GN,CAACtE,OAAD,CAAUO,KAAV,CAAiBH,KAAjB,CAAwBiB,qBAAxB,CA5GM,CAAT,CA8GA,mBACE,sEAAK,SAAS,CAAC,WAAf,UACGmB,mEAAgB,CAACgC,GAAjB,CAAqB,SAACjD,SAAD,CAAYc,KAAZ,qBACpB,sEAEE,SAAS,CAAEoC,iDAAU,CAAC,YAAD,CAFvB,CAGE,GAAG,CAAEpC,KAAK,GAAK,CAAV,CAAclC,UAAd,CAA2B,IAHlC,CAIE,KAAK,CAAE,CAACC,KAAK,gBAAU,IAAMoC,mEAAgB,CAAC1B,MAAjC,MAAN,CAJT,uBAME,sEACE,GAAG,CAAE,aAAC4D,EAAD,CAAQ,CACX5E,IAAI,CAACoC,OAAL,CAAaG,KAAb,EAAsBqC,EAAtB,CACD,CAHH,CAIE,mBAAmB,CAAC,eAJtB,CAKE,KAAK,CAAEtE,KALT,CAME,MAAM,CAAEZ,MANV,EANF,EACO+B,SADP,CADoB,EAArB,CADH,EADF,CAqBD,CAED,GAAMoD,QAAO,CAAG,QAAVA,QAAU,CAACC,SAAD,CAAYC,SAAZ,CAA0B,CACxC,GAAIA,SAAS,CAACC,WAAd,CAA2B,CACzB,MAAO,MAAP,CACD,CAFD,IAEO,IAAI,CAACD,SAAS,CAAClF,UAAX,EAAyBiF,SAAS,CAACjF,UAAvC,CAAmD,CACxD,MAAO,KAAP,CACD,CAFM,IAEA,IAAIkF,SAAS,CAAClF,UAAV,EAAwB,CAACiF,SAAS,CAACjF,UAAvC,CAAmD,CACxD,MAAO,MAAP,CACD,CAFM,IAEA,IAAI,CAACoF,uDAAK,CAACF,SAAS,CAACG,SAAX,CAAsBJ,SAAS,CAACI,SAAhC,CAAV,CAAsD,CAC3D,MAAO,MAAP,CACD,CAFM,IAEA,IAAI,CAACD,uDAAK,CAACF,SAAS,CAAChF,IAAX,CAAiB+E,SAAS,CAAC/E,IAA3B,CAAV,CAA4C,CACjD,MAAO,MAAP,CACD,CACD,MAAO,KAAP,CACD,CAbD,CAeeoF,+HAAI,CAACvF,UAAD,CAAaiF,OAAb,CAAnB,E","file":"x","sourcesContent":["import {\n  MINIGRAPH_LOOKBACK_DAYS,\n  LEVEL_STATISTICS,\n  STATISTIC_CONFIGS,\n} from '../constants';\nimport {\n  getStatistic,\n  getIndiaDateYesterdayISO,\n  parseIndiaDate,\n} from '../utils/commonFunctions';\n\nimport classnames from 'classnames';\nimport {max} from 'd3-array';\nimport {interpolatePath} from 'd3-interpolate-path';\nimport {scaleTime, scaleLinear} from 'd3-scale';\nimport {select} from 'd3-selection';\nimport {line, curveMonotoneX} from 'd3-shape';\nimport 'd3-transition';\nimport {formatISO, subDays} from 'date-fns';\nimport equal from 'fast-deep-equal';\nimport {memo, useCallback, useEffect, useRef, useMemo} from 'react';\nimport {useMeasure} from 'react-use';\n\n// Dimensions\nconst margin = {top: 10, right: 10, bottom: 2, left: 10};\nconst height = 75;\nconst maxWidth = 120;\n\nfunction Minigraphs({timeseries, date: timelineDate}) {\n  const refs = useRef([]);\n  const endDate = timelineDate || getIndiaDateYesterdayISO();\n\n  let [wrapperRef, {width}] = useMeasure();\n  width = Math.min(width, maxWidth);\n\n  const dates = useMemo(() => {\n    const pastDates = Object.keys(timeseries || {}).filter(\n      (date) => date <= endDate\n    );\n    const lastDate = pastDates[pastDates.length - 1];\n\n    const cutOffDateLower = formatISO(\n      subDays(parseIndiaDate(lastDate), MINIGRAPH_LOOKBACK_DAYS),\n      {representation: 'date'}\n    );\n    return pastDates.filter((date) => date >= cutOffDateLower);\n  }, [endDate, timeseries]);\n\n  const getMinigraphStatistic = useCallback(\n    (date, statistic) => {\n      return getStatistic(timeseries?.[date], 'delta', statistic);\n    },\n    [timeseries]\n  );\n\n  useEffect(() => {\n    if (!width) return;\n\n    const T = dates.length;\n\n    const chartRight = width - margin.right;\n    const chartBottom = height - margin.bottom;\n\n    const xScale = scaleTime()\n      .clamp(true)\n      .domain([\n        parseIndiaDate(dates[0] || endDate),\n        parseIndiaDate(dates[T - 1]) || endDate,\n      ])\n      .range([margin.left, chartRight]);\n\n    refs.current.forEach((ref, index) => {\n      const svg = select(ref);\n      const statistic = LEVEL_STATISTICS[index];\n      const color = STATISTIC_CONFIGS[statistic].color;\n\n      const dailyMaxAbs = max(dates, (date) =>\n        Math.abs(getMinigraphStatistic(date, statistic))\n      );\n\n      const yScale = scaleLinear()\n        .clamp(true)\n        .domain([-dailyMaxAbs, dailyMaxAbs])\n        .range([chartBottom, margin.top]);\n\n      const linePath = line()\n        .curve(curveMonotoneX)\n        .x((date) => xScale(parseIndiaDate(date)))\n        .y((date) => yScale(getMinigraphStatistic(date, statistic)));\n\n      let pathLength;\n      svg\n        .selectAll('path')\n        .data(T ? [dates] : [])\n        .join(\n          (enter) =>\n            enter\n              .append('path')\n              .attr('fill', 'none')\n              .attr('stroke', color + '99')\n              .attr('stroke-width', 2.5)\n              .attr('d', linePath)\n              .attr('stroke-dasharray', function () {\n                return (pathLength = this.getTotalLength());\n              })\n              .call((enter) =>\n                enter\n                  .attr('stroke-dashoffset', pathLength)\n                  .transition()\n                  .delay(100)\n                  .duration(2500)\n                  .attr('stroke-dashoffset', 0)\n              ),\n          (update) =>\n            update\n              .attr('stroke-dasharray', null)\n              .transition()\n              .duration(500)\n              .attrTween('d', function (date) {\n                const previous = select(this).attr('d');\n                const current = linePath(date);\n                return interpolatePath(previous, current);\n              })\n              .selection()\n        );\n\n      svg\n        .selectAll('circle')\n        .data(T ? [dates[T - 1]] : [])\n        .join(\n          (enter) =>\n            enter\n              .append('circle')\n              .attr('fill', color)\n              .attr('r', 2.5)\n              .attr('cx', (date) => xScale(parseIndiaDate(date)))\n              .attr('cy', (date) =>\n                yScale(getMinigraphStatistic(date, statistic))\n              )\n              .style('opacity', 0)\n              .call((enter) =>\n                enter\n                  .transition()\n                  .delay(2100)\n                  .duration(500)\n                  .style('opacity', 1)\n                  .attr('cx', (date) => xScale(parseIndiaDate(date)))\n                  .attr('cy', (date) =>\n                    yScale(getMinigraphStatistic(date, statistic))\n                  )\n              ),\n          (update) =>\n            update\n              .transition()\n              .duration(500)\n              .attr('cx', (date) => xScale(parseIndiaDate(date)))\n              .attr('cy', (date) =>\n                yScale(getMinigraphStatistic(date, statistic))\n              )\n              .style('opacity', 1)\n              .selection()\n        );\n    });\n  }, [endDate, dates, width, getMinigraphStatistic]);\n\n  return (\n    <div className=\"Minigraph\">\n      {LEVEL_STATISTICS.map((statistic, index) => (\n        <div\n          key={statistic}\n          className={classnames('svg-parent')}\n          ref={index === 0 ? wrapperRef : null}\n          style={{width: `calc(${100 / LEVEL_STATISTICS.length}%)`}}\n        >\n          <svg\n            ref={(el) => {\n              refs.current[index] = el;\n            }}\n            preserveAspectRatio=\"xMidYMid meet\"\n            width={width}\n            height={height}\n          />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nconst isEqual = (prevProps, currProps) => {\n  if (currProps.forceRender) {\n    return false;\n  } else if (!currProps.timeseries && prevProps.timeseries) {\n    return true;\n  } else if (currProps.timeseries && !prevProps.timeseries) {\n    return false;\n  } else if (!equal(currProps.stateCode, prevProps.stateCode)) {\n    return false;\n  } else if (!equal(currProps.date, prevProps.date)) {\n    return false;\n  }\n  return true;\n};\n\nexport default memo(Minigraphs, isEqual);\n"]}}