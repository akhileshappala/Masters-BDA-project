{"ast":null,"code":"import _slicedToArray from\"/Users/ssakhilesha/Documents/GitHub/Masters-BDA-project/website/covid19/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{SPRING_CONFIG_NUMBERS,STATISTIC_CONFIGS}from'../constants.js';import{formatNumber,getStatistic}from'../utils/commonFunctions';import{ShieldCheckIcon}from'@primer/octicons-react';import classnames from'classnames';import equal from'fast-deep-equal';import{useEffect,useRef,useState,memo}from'react';import{useTranslation}from'react-i18next';import{animated,useSpring,Globals}from'react-spring';// Disable react-spring color string interpolation\n// It renders administered => administergba(255, 0, 0, 1)\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";Globals.assign({colors:null});function ProgressBar(_ref){var dose1=_ref.dose1,dose2=_ref.dose2;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useState=useState(2),_useState2=_slicedToArray(_useState,2),highlightedDose=_useState2[0],setHighlightedDose=_useState2[1];var isMounted=useRef(false);var doseSpring=useSpring({dose1:dose1,dose2:dose2,from:{dose1:0,dose2:0},delay:isMounted.current?0:2000});useEffect(function(){isMounted.current=true;},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"progress-bar-wrapper fadeInUp\",style:{animationDelay:\"\".concat(750+5*250,\"ms\")},children:[/*#__PURE__*/_jsxs(\"div\",{className:classnames('legend',{highlighted:highlightedDose===1}),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"label-wrapper\",children:[/*#__PURE__*/_jsx(animated.div,{style:{width:doseSpring.dose1.to(function(n){return\"calc(\".concat(n,\"% - 3rem)\");})}}),/*#__PURE__*/_jsx(\"div\",{className:\"label\",onMouseEnter:setHighlightedDose.bind(this,1),onMouseLeave:setHighlightedDose.bind(this,2),children:t('At least one dose')})]}),/*#__PURE__*/_jsx(animated.div,{className:\"arrow\",style:{marginLeft:doseSpring.dose1.to(function(n){return\"calc(\".concat(n,\"% - 0.3ch)\");})},children:\"|\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"progress-bar\",children:[/*#__PURE__*/_jsx(animated.div,{className:classnames('progress-bar','value',{highlighted:highlightedDose===1}),style:{width:doseSpring.dose1.to(function(n){return\"\".concat(n,\"%\");})},onMouseEnter:setHighlightedDose.bind(this,1),onMouseLeave:setHighlightedDose.bind(this,2),children:/*#__PURE__*/_jsx(animated.span,{children:doseSpring.dose1.to(function(n){return formatNumber(n,'%');})})}),/*#__PURE__*/_jsx(animated.div,{className:classnames('progress-bar','value','opaque',{highlighted:highlightedDose===2}),style:{width:doseSpring.dose2.to(function(n){return\"\".concat(n,\"%\");})}})]}),dose2>0&&/*#__PURE__*/_jsxs(\"div\",{className:classnames('legend',{highlighted:highlightedDose===2}),children:[/*#__PURE__*/_jsx(animated.div,{className:\"arrow\",style:{marginLeft:doseSpring.dose2.to(function(n){return\"calc(\".concat(n,\"% - 0.3ch)\");})},children:\"|\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"label-wrapper\",children:[/*#__PURE__*/_jsx(animated.div,{style:{width:doseSpring.dose2.to(function(n){return\"calc(\".concat(n,\"% - 4rem)\");})}}),/*#__PURE__*/_jsx(animated.div,{className:\"label\",children:doseSpring.dose2.to(function(n){return\"\".concat(t('Fully vaccinated'),\" (\").concat(formatNumber(n,'%'),\")\");})})]})]})]});}function Level(_ref2){var data=_ref2.data;var _useTranslation2=useTranslation(),t=_useTranslation2.t;var spring=useSpring({total:getStatistic(data,'total','vaccinated'),// delta: getStatistic(data, 'delta', 'vaccinated'),\nconfig:SPRING_CONFIG_NUMBERS});var statisticConfig=STATISTIC_CONFIGS.vaccinated;return/*#__PURE__*/_jsxs(\"div\",{className:\"level-vaccinated fadeInUp\",style:{animationDelay:\"\".concat(750+4*250,\"ms\")},children:[/*#__PURE__*/_jsx(ShieldCheckIcon,{}),/*#__PURE__*/_jsx(animated.div,{children:spring.total.to(function(total){return formatNumber(total,'long');})}),/*#__PURE__*/_jsx(\"div\",{children:t(statisticConfig.displayName)})]});}function VaccinationHeader(_ref3){var data=_ref3.data;var dose1=getStatistic(data,'total','vaccinated1',{normalizedByPopulationPer:'hundred'});var dose2=getStatistic(data,'total','vaccinated2',{normalizedByPopulationPer:'hundred'});return/*#__PURE__*/_jsxs(\"div\",{className:\"VaccinationHeader\",children:[/*#__PURE__*/_jsx(Level,{data:data}),/*#__PURE__*/_jsx(ProgressBar,{dose1:dose1,dose2:dose2})]});}var isEqual=function isEqual(prevProps,currProps){if(!equal(prevProps.data,currProps.data)){return false;}return true;};export default/*#__PURE__*/memo(VaccinationHeader,isEqual);","map":{"version":3,"sources":["/Users/ssakhilesha/Documents/GitHub/Masters-BDA-project/website/covid19/src/components/VaccinationHeader.js"],"names":["SPRING_CONFIG_NUMBERS","STATISTIC_CONFIGS","formatNumber","getStatistic","ShieldCheckIcon","classnames","equal","useEffect","useRef","useState","memo","useTranslation","animated","useSpring","Globals","assign","colors","ProgressBar","dose1","dose2","t","highlightedDose","setHighlightedDose","isMounted","doseSpring","from","delay","current","animationDelay","highlighted","width","to","n","bind","marginLeft","Level","data","spring","total","config","statisticConfig","vaccinated","displayName","VaccinationHeader","normalizedByPopulationPer","isEqual","prevProps","currProps"],"mappings":"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","sourcesContent":["import {SPRING_CONFIG_NUMBERS, STATISTIC_CONFIGS} from '../constants.js';\nimport {formatNumber, getStatistic} from '../utils/commonFunctions';\n\nimport {ShieldCheckIcon} from '@primer/octicons-react';\nimport classnames from 'classnames';\nimport equal from 'fast-deep-equal';\nimport {useEffect, useRef, useState, memo} from 'react';\nimport {useTranslation} from 'react-i18next';\nimport {animated, useSpring, Globals} from 'react-spring';\n\n// Disable react-spring color string interpolation\n// It renders administered => administergba(255, 0, 0, 1)\nGlobals.assign({colors: null});\n\nfunction ProgressBar({dose1, dose2}) {\n  const {t} = useTranslation();\n  const [highlightedDose, setHighlightedDose] = useState(2);\n  const isMounted = useRef(false);\n\n  const doseSpring = useSpring({\n    dose1,\n    dose2,\n    from: {\n      dose1: 0,\n      dose2: 0,\n    },\n    delay: isMounted.current ? 0 : 2000,\n  });\n\n  useEffect(() => {\n    isMounted.current = true;\n  }, []);\n\n  return (\n    <div\n      className=\"progress-bar-wrapper fadeInUp\"\n      style={{animationDelay: `${750 + 5 * 250}ms`}}\n    >\n      <div\n        className={classnames('legend', {highlighted: highlightedDose === 1})}\n      >\n        <div className=\"label-wrapper\">\n          <animated.div\n            style={{width: doseSpring.dose1.to((n) => `calc(${n}% - 3rem)`)}}\n          />\n          <div\n            className=\"label\"\n            onMouseEnter={setHighlightedDose.bind(this, 1)}\n            onMouseLeave={setHighlightedDose.bind(this, 2)}\n          >\n            {t('At least one dose')}\n          </div>\n        </div>\n        <animated.div\n          className=\"arrow\"\n          style={{\n            marginLeft: doseSpring.dose1.to((n) => `calc(${n}% - 0.3ch)`),\n          }}\n        >\n          |\n        </animated.div>\n      </div>\n      <div className=\"progress-bar\">\n        <animated.div\n          className={classnames('progress-bar', 'value', {\n            highlighted: highlightedDose === 1,\n          })}\n          style={{width: doseSpring.dose1.to((n) => `${n}%`)}}\n          onMouseEnter={setHighlightedDose.bind(this, 1)}\n          onMouseLeave={setHighlightedDose.bind(this, 2)}\n        >\n          <animated.span>\n            {doseSpring.dose1.to((n) => formatNumber(n, '%'))}\n          </animated.span>\n        </animated.div>\n        <animated.div\n          className={classnames('progress-bar', 'value', 'opaque', {\n            highlighted: highlightedDose === 2,\n          })}\n          style={{width: doseSpring.dose2.to((n) => `${n}%`)}}\n        />\n      </div>\n      {dose2 > 0 && (\n        <div\n          className={classnames('legend', {\n            highlighted: highlightedDose === 2,\n          })}\n        >\n          <animated.div\n            className=\"arrow\"\n            style={{\n              marginLeft: doseSpring.dose2.to((n) => `calc(${n}% - 0.3ch)`),\n            }}\n          >\n            |\n          </animated.div>\n          <div className=\"label-wrapper\">\n            <animated.div\n              style={{\n                width: doseSpring.dose2.to((n) => `calc(${n}% - 4rem)`),\n              }}\n            />\n            <animated.div className=\"label\">\n              {doseSpring.dose2.to(\n                (n) => `${t('Fully vaccinated')} (${formatNumber(n, '%')})`\n              )}\n            </animated.div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction Level({data}) {\n  const {t} = useTranslation();\n\n  const spring = useSpring({\n    total: getStatistic(data, 'total', 'vaccinated'),\n    // delta: getStatistic(data, 'delta', 'vaccinated'),\n    config: SPRING_CONFIG_NUMBERS,\n  });\n\n  const statisticConfig = STATISTIC_CONFIGS.vaccinated;\n\n  return (\n    <div\n      className=\"level-vaccinated fadeInUp\"\n      style={{animationDelay: `${750 + 4 * 250}ms`}}\n    >\n      <ShieldCheckIcon />\n      <animated.div>\n        {spring.total.to((total) => formatNumber(total, 'long'))}\n      </animated.div>\n      {/* <animated.div>\n        {spring.delta.to(\n          (delta) =>\n            `(+ ${formatNumber(delta, 'long')})`\n        )}\n      </animated.div> */}\n      <div>{t(statisticConfig.displayName)}</div>\n    </div>\n  );\n}\n\nfunction VaccinationHeader({data}) {\n  const dose1 = getStatistic(data, 'total', 'vaccinated1', {\n    normalizedByPopulationPer: 'hundred',\n  });\n  const dose2 = getStatistic(data, 'total', 'vaccinated2', {\n    normalizedByPopulationPer: 'hundred',\n  });\n\n  return (\n    <div className=\"VaccinationHeader\">\n      <Level {...{data}} />\n      <ProgressBar {...{dose1, dose2}} />\n    </div>\n  );\n}\n\nconst isEqual = (prevProps, currProps) => {\n  if (!equal(prevProps.data, currProps.data)) {\n    return false;\n  }\n  return true;\n};\n\nexport default memo(VaccinationHeader, isEqual);\n"]},"metadata":{},"sourceType":"module"}