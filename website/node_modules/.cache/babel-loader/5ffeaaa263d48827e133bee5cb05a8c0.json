{"ast":null,"code":"import _defineProperty from\"/Users/ssakhilesha/Documents/GitHub/Masters-BDA-project/website/covid19/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/ssakhilesha/Documents/GitHub/Masters-BDA-project/website/covid19/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _this=this;import{LEVEL_STATISTICS,STATISTIC_CONFIGS}from'../constants';import classnames from'classnames';import{memo,useState,useCallback,useEffect}from'react';import ReactDOM from'react-dom';import{useSpring,animated,config}from'react-spring';import{useMeasure}from'react-use';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MapSwitcher=function MapSwitcher(_ref){var mapStatistic=_ref.mapStatistic,setMapStatistic=_ref.setMapStatistic;var _useMeasure=useMeasure(),_useMeasure2=_slicedToArray(_useMeasure,2),mapSwitcher=_useMeasure2[0],width=_useMeasure2[1].width;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),clicked=_useState2[0],setClicked=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),count=_useState4[0],setCount=_useState4[1];var isPresent=LEVEL_STATISTICS.indexOf(mapStatistic)>=0;var _useSpring=useSpring(function(){return{opacity:0,background:\"\".concat(STATISTIC_CONFIGS[mapStatistic].color,\"20\"),transform:isPresent?\"translate3d(\".concat(width*LEVEL_STATISTICS.indexOf(mapStatistic)/LEVEL_STATISTICS.length,\"px, 0, 0)\"):null,width:\"calc(\".concat(100/LEVEL_STATISTICS.length,\"%)\"),config:config.gentle};}),_useSpring2=_slicedToArray(_useSpring,2),spring=_useSpring2[0],springApi=_useSpring2[1];useEffect(function(){if(width>0){var _isPresent=LEVEL_STATISTICS.indexOf(mapStatistic)>=0;ReactDOM.unstable_batchedUpdates(function(){var _STATISTIC_CONFIGS$ma;springApi.start({transform:_isPresent?\"translate3d(\".concat(width*LEVEL_STATISTICS.indexOf(mapStatistic)/LEVEL_STATISTICS.length,\"px, 0, 0)\"):null,opacity:_isPresent?1:0,background:_isPresent?\"\".concat((_STATISTIC_CONFIGS$ma=STATISTIC_CONFIGS[mapStatistic])===null||_STATISTIC_CONFIGS$ma===void 0?void 0:_STATISTIC_CONFIGS$ma.color,\"20\"):null,delay:count===0?1500:0,onStart:setClicked.bind(_this,true),onRest:setClicked.bind(_this,false)});});}},[count,mapStatistic,springApi,width]);var handleClick=useCallback(function(statistic){setCount(function(prevCount){return prevCount+1;});setMapStatistic(statistic);},[setMapStatistic]);return/*#__PURE__*/_jsxs(\"div\",{className:\"MapSwitcher\",ref:mapSwitcher,children:[/*#__PURE__*/_jsx(animated.div,{className:\"highlight\",style:spring}),LEVEL_STATISTICS.map(function(statistic,index){return/*#__PURE__*/_jsx(\"div\",{className:classnames('clickable',_defineProperty({},\"is-\".concat(statistic),!clicked)),onClick:handleClick.bind(_this,statistic),style:{width:\"calc(\".concat(100/LEVEL_STATISTICS.length,\"%)\")}},index);})]});};var isEqual=function isEqual(prevProps,currProps){if(prevProps.mapStatistic!==currProps.mapStatistic){return false;}return true;};export default/*#__PURE__*/memo(MapSwitcher,isEqual);","map":{"version":3,"sources":["/Users/ssakhilesha/Documents/GitHub/Masters-BDA-project/website/covid19/src/components/MapSwitcher.js"],"names":["LEVEL_STATISTICS","STATISTIC_CONFIGS","classnames","memo","useState","useCallback","useEffect","ReactDOM","useSpring","animated","config","useMeasure","MapSwitcher","mapStatistic","setMapStatistic","mapSwitcher","width","clicked","setClicked","count","setCount","isPresent","indexOf","opacity","background","color","transform","length","gentle","spring","springApi","unstable_batchedUpdates","start","delay","onStart","bind","onRest","handleClick","statistic","prevCount","map","index","isEqual","prevProps","currProps"],"mappings":"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","sourcesContent":["import {LEVEL_STATISTICS, STATISTIC_CONFIGS} from '../constants';\n\nimport classnames from 'classnames';\nimport {memo, useState, useCallback, useEffect} from 'react';\nimport ReactDOM from 'react-dom';\nimport {useSpring, animated, config} from 'react-spring';\nimport {useMeasure} from 'react-use';\n\nconst MapSwitcher = ({mapStatistic, setMapStatistic}) => {\n  const [mapSwitcher, {width}] = useMeasure();\n  const [clicked, setClicked] = useState(false);\n  const [count, setCount] = useState(0);\n\n  const isPresent = LEVEL_STATISTICS.indexOf(mapStatistic) >= 0;\n\n  const [spring, springApi] = useSpring(() => ({\n    opacity: 0,\n    background: `${STATISTIC_CONFIGS[mapStatistic].color}20`,\n    transform: isPresent\n      ? `translate3d(${\n          (width * LEVEL_STATISTICS.indexOf(mapStatistic)) /\n          LEVEL_STATISTICS.length\n        }px, 0, 0)`\n      : null,\n    width: `calc(${100 / LEVEL_STATISTICS.length}%)`,\n    config: config.gentle,\n  }));\n\n  useEffect(() => {\n    if (width > 0) {\n      const isPresent = LEVEL_STATISTICS.indexOf(mapStatistic) >= 0;\n      ReactDOM.unstable_batchedUpdates(() => {\n        springApi.start({\n          transform: isPresent\n            ? `translate3d(${\n                (width * LEVEL_STATISTICS.indexOf(mapStatistic)) /\n                LEVEL_STATISTICS.length\n              }px, 0, 0)`\n            : null,\n          opacity: isPresent ? 1 : 0,\n          background: isPresent\n            ? `${STATISTIC_CONFIGS[mapStatistic]?.color}20`\n            : null,\n          delay: count === 0 ? 1500 : 0,\n          onStart: setClicked.bind(this, true),\n          onRest: setClicked.bind(this, false),\n        });\n      });\n    }\n  }, [count, mapStatistic, springApi, width]);\n\n  const handleClick = useCallback(\n    (statistic) => {\n      setCount((prevCount) => prevCount + 1);\n      setMapStatistic(statistic);\n    },\n    [setMapStatistic]\n  );\n\n  return (\n    <div className=\"MapSwitcher\" ref={mapSwitcher}>\n      <animated.div className=\"highlight\" style={spring}></animated.div>\n\n      {LEVEL_STATISTICS.map((statistic, index) => (\n        <div\n          key={index}\n          className={classnames('clickable', {[`is-${statistic}`]: !clicked})}\n          onClick={handleClick.bind(this, statistic)}\n          style={{width: `calc(${100 / LEVEL_STATISTICS.length}%)`}}\n        ></div>\n      ))}\n    </div>\n  );\n};\n\nconst isEqual = (prevProps, currProps) => {\n  if (prevProps.mapStatistic !== currProps.mapStatistic) {\n    return false;\n  }\n  return true;\n};\n\nexport default memo(MapSwitcher, isEqual);\n"]},"metadata":{},"sourceType":"module"}